<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shiksha Setu - Student Application Generator</title>
    <meta name="description" content="Generate professional student applications for leave, certificates, and more with Shiksha Setu - your digital arzi tool">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.6s ease-out forwards',
                        'slide-down': 'slideDown 0.4s ease-out forwards',
                        'pulse-soft': 'pulseSoft 2s infinite',
                        'bounce-subtle': 'bounceSubtle 2s infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'shimmer': 'shimmer 2s linear infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                    },
                    colors: {
                        primary: {
                            50: '#f0f4ff',
                            100: '#e0e9ff',
                            200: '#c7d7fe',
                            300: '#a4bbfc',
                            400: '#8098f9',
                            500: '#667eea',
                            600: '#5a67d8',
                            700: '#4c51bf',
                            800: '#434190',
                            900: '#3c366b',
                        },
                        accent: {
                            500: '#764ba2',
                            600: '#6b4190',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&display=swap');
        
        * { transition: background-color 0.3s, color 0.3s, border-color 0.3s, box-shadow 0.3s; }
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .font-serif { font-family: 'Playfair Display', Georgia, serif; }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            border-radius: 10px;
            border: 2px solid #f1f5f9;
        }
        ::-webkit-scrollbar-thumb:hover { background: linear-gradient(135deg, #5a67d8 0%, #6b4190 100%); }
        .dark ::-webkit-scrollbar-track { background: #1e293b; }
        .dark ::-webkit-scrollbar-thumb { border-color: #1e293b; }
        
        /* Gradient backgrounds */
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-bg-animated {
            background: linear-gradient(-45deg, #667eea, #764ba2, #6366f1, #8b5cf6);
            background-size: 400% 400%;
            animation: gradientFlow 8s ease infinite;
        }
        .gradient-bg-light { 
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%);
        }
        .dark .gradient-bg-light { 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
        }
        
        /* Glass morphism effect */
        .glass { 
            background: rgba(255, 255, 255, 0.85); 
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .dark .glass { 
            background: rgba(30, 41, 59, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Enhanced glass for cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.1);
        }
        .dark .glass-card {
            background: rgba(30, 41, 59, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        /* Animations */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { 
            from { opacity: 0; transform: translateY(30px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        @keyframes slideDown { 
            from { opacity: 0; transform: translateY(-20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        @keyframes pulseSoft { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        @keyframes bounceSubtle { 
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); }
            to { box-shadow: 0 0 40px rgba(102, 126, 234, 0.6); }
        }
        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }
        
        /* Custom button hover effect */
        .btn-hover { 
            position: relative; 
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        .btn-hover:hover::before { left: 100%; }
        .btn-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4); }
        .btn-hover:active { transform: translateY(0); }
        
        /* Enhanced input styles */
        .input-modern {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, #e2e8f0, #cbd5e1) border-box;
        }
        .dark .input-modern {
            background: linear-gradient(#1e293b, #1e293b) padding-box,
                        linear-gradient(135deg, #334155, #475569) border-box;
        }
        .input-modern:focus { 
            outline: none;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(135deg, #667eea, #764ba2) border-box;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15), 0 4px 15px rgba(102, 126, 234, 0.2);
        }
        .dark .input-modern:focus {
            background: linear-gradient(#1e293b, #1e293b) padding-box,
                        linear-gradient(135deg, #667eea, #764ba2) border-box;
        }
        
        /* Floating label animation */
        .floating-label {
            position: relative;
        }
        .floating-label label {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
            background: white;
            padding: 0 4px;
        }
        .dark .floating-label label {
            background: #1e293b;
        }
        .floating-label input:focus ~ label,
        .floating-label input:not(:placeholder-shown) ~ label,
        .floating-label textarea:focus ~ label,
        .floating-label textarea:not(:placeholder-shown) ~ label {
            top: 0;
            font-size: 0.75rem;
            color: #667eea;
            font-weight: 600;
        }
        
        /* Toast notification with better animation */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(120px) scale(0.9);
            padding: 16px 28px;
            border-radius: 16px;
            color: white;
            font-weight: 600;
            z-index: 9999;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .toast.show { 
            transform: translateX(-50%) translateY(0) scale(1); 
            opacity: 1; 
        }
        .toast-success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .toast-error { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .toast-info { background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); }
        
        /* Card hover effect with depth */
        .card-hover { 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-hover:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 25px 50px rgba(102, 126, 234, 0.15),
                        0 15px 25px rgba(0,0,0,0.1);
        }
        
        /* Paper effect for letter preview */
        .paper-effect {
            background: linear-gradient(to bottom, #ffffff 0%, #fafafa 100%);
            position: relative;
            box-shadow: 
                0 1px 1px rgba(0,0,0,0.05),
                0 2px 2px rgba(0,0,0,0.05),
                0 4px 4px rgba(0,0,0,0.05),
                0 8px 8px rgba(0,0,0,0.05),
                0 16px 16px rgba(0,0,0,0.05);
        }
        .paper-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
            border-radius: 8px 8px 0 0;
        }
        .dark .paper-effect {
            background: linear-gradient(to bottom, #1e293b 0%, #0f172a 100%);
        }
        
        /* Icon badge animation */
        .icon-badge {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .icon-badge::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: inherit;
            background: inherit;
            opacity: 0;
            animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
        }
        @keyframes ping {
            75%, 100% { transform: scale(1.5); opacity: 0; }
        }
        
        /* Step indicator */
        .step-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .step-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #cbd5e1;
            transition: all 0.3s;
        }
        .step-dot.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }
        
        /* PRINT SETTINGS */
        @media print {
            body * { visibility: hidden; }
            #printable-area, #printable-area * { visibility: visible; }
            #printable-area { 
                position: absolute; 
                left: 0; 
                top: 0; 
                width: 100%; 
                padding: 50px; 
                background: white !important;
                border: none;
                box-shadow: none;
                color: black !important;
            }
            .no-print { display: none !important; }
            .paper-effect::before { display: none; }
        }
        
        /* Mobile optimizations */
        @media (max-width: 640px) {
            .mobile-full { width: 100%; }
            .mobile-text-sm { font-size: 0.875rem; }
            .mobile-p-3 { padding: 0.75rem; }
        }
        
        /* Skeleton loading */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        .dark .skeleton {
            background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%);
            background-size: 200% 100%;
        }
        
        /* Decorative elements */
        .decorative-blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.4;
            pointer-events: none;
        }
        
        /* Selection styling */
        ::selection {
            background: rgba(102, 126, 234, 0.3);
            color: inherit;
        }
    </style>
</head>
<body class="text-gray-800 dark:text-gray-200 gradient-bg-light min-h-screen overflow-x-hidden">
    
    <!-- Decorative Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="decorative-blob w-96 h-96 bg-purple-400 dark:bg-purple-600 -top-48 -right-48"></div>
        <div class="decorative-blob w-80 h-80 bg-blue-400 dark:bg-blue-600 top-1/3 -left-40"></div>
        <div class="decorative-blob w-72 h-72 bg-indigo-400 dark:bg-indigo-600 bottom-20 right-20"></div>
    </div>

    <!-- Toast Container -->
    <div id="toast" class="toast toast-success" role="alert" aria-live="polite">
        <i class="fas fa-check-circle text-xl" aria-hidden="true"></i>
        <span id="toast-message">Copied!</span>
    </div>

    <!-- Navigation -->
    <nav class="gradient-bg-animated text-white p-4 shadow-2xl sticky top-0 z-50 no-print">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-white/20 backdrop-blur flex items-center justify-center icon-badge">
                    <i class="fas fa-graduation-cap text-lg sm:text-xl"></i>
                </div>
                <div>
                    <h1 class="text-lg sm:text-2xl font-bold tracking-tight">Shiksha Setu</h1>
                    <p class="text-[10px] sm:text-xs opacity-80 font-medium">Digital Arzi Generator</p>
                </div>
            </div>
            <div class="flex items-center gap-2 sm:gap-4">
                <div class="hidden md:flex items-center gap-2 bg-white/10 backdrop-blur px-4 py-2 rounded-full border border-white/20">
                    <i class="fas fa-sparkles text-yellow-300"></i>
                    <span class="text-sm font-medium">Quick & Professional</span>
                </div>
                <button onclick="toggleDarkMode()" class="w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur flex items-center justify-center transition-all hover:scale-110" title="Toggle Dark Mode">
                    <i id="theme-icon" class="fas fa-moon text-lg"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="no-print py-8 sm:py-12 relative">
        <div class="container mx-auto px-4">
            <div class="text-center max-w-3xl mx-auto animate-slide-up">
                <div class="inline-flex items-center gap-2 bg-gradient-to-r from-primary-100 to-purple-100 dark:from-primary-900/50 dark:to-purple-900/50 text-primary-700 dark:text-primary-300 px-4 py-2 rounded-full text-sm font-semibold mb-4 border border-primary-200 dark:border-primary-700">
                    <i class="fas fa-wand-magic-sparkles"></i>
                    Generate Applications in Seconds
                </div>
                <h2 class="text-2xl sm:text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-4 leading-tight">
                    Create <span class="bg-gradient-to-r from-primary-500 to-accent-500 bg-clip-text text-transparent">Professional</span> Student Applications
                </h2>
                <p class="text-gray-600 dark:text-gray-400 text-sm sm:text-lg max-w-2xl mx-auto mb-6">
                    Fill in your details, choose your application type, and get a perfectly formatted letter ready to print or share instantly.
                </p>
                
                <!-- Stats -->
                <div class="flex flex-wrap justify-center gap-6 sm:gap-10 mt-8">
                    <div class="text-center">
                        <div class="text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-500 to-accent-500 bg-clip-text text-transparent">11+</div>
                        <div class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium">Application Types</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-500 to-accent-500 bg-clip-text text-transparent">100%</div>
                        <div class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium">Free Forever</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-500 to-accent-500 bg-clip-text text-transparent">Instant</div>
                        <div class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium">Generation</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container mx-auto px-3 sm:px-4 lg:px-6 pb-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8">
            
            <!-- Input Form Card -->
            <div class="glass-card p-5 sm:p-8 rounded-3xl no-print card-hover animate-slide-up" style="animation-delay: 0.1s;">
                <div class="flex items-center justify-between mb-6 sm:mb-8">
                    <h2 class="text-xl sm:text-2xl font-bold flex items-center gap-3 text-gray-800 dark:text-white">
                        <span class="w-12 h-12 rounded-2xl gradient-bg flex items-center justify-center shadow-lg">
                            <i class="fas fa-pen-fancy text-white text-lg"></i>
                        </span>
                        Enter Details
                    </h2>
                    <div class="step-indicator hidden sm:flex">
                        <span class="step-dot active"></span>
                        <span class="step-dot active"></span>
                        <span class="step-dot"></span>
                    </div>
                </div>

                <!-- Application Type -->
                <div class="mb-5">
                    <label class="flex items-center gap-2 mb-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">
                        <span class="w-6 h-6 rounded-lg gradient-bg flex items-center justify-center">
                            <i class="fas fa-file-alt text-white text-xs"></i>
                        </span>
                        Application Type
                    </label>
                    <select id="appType" class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 text-gray-800 dark:text-white input-modern cursor-pointer text-sm sm:text-base font-medium" onchange="generateApp()" aria-label="Select application type">
                        <optgroup label="Leave Applications">
                            <option value="sick">ü§í Sick Leave</option>
                            <option value="urgent">‚ö° Urgent Work Leave</option>
                            <option value="exam">üìù Exam Leave</option>
                            <option value="family">üë®‚Äçüë©‚Äçüëß Family Function Leave</option>
                            <option value="medical">üè• Medical Appointment</option>
                        </optgroup>
                        <optgroup label="Certificates and Documents">
                            <option value="buspass">üöå Bus Pass Verification</option>
                            <option value="dmc">üìã DMC Correction / Issue</option>
                            <option value="fee">üí∞ Fee Concession</option>
                            <option value="transfer">üîÑ Transfer Certificate</option>
                            <option value="character">üìú Character Certificate</option>
                            <option value="library">üìö Library Card Issue</option>
                        </optgroup>
                    </select>
                </div>

                <!-- Name and Roll No -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-5">
                    <div>
                        <label class="flex items-center gap-2 mb-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">
                            <span class="w-6 h-6 rounded-lg bg-blue-500 flex items-center justify-center">
                                <i class="fas fa-user text-white text-xs"></i>
                            </span>
                            Your Name
                        </label>
                        <input type="text" id="studentName" placeholder="e.g., Amit Kumar" 
                            class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 text-gray-800 dark:text-white input-modern text-sm sm:text-base" 
                            oninput="generateApp()">
                    </div>
                    <div>
                        <label class="flex items-center gap-2 mb-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">
                            <span class="w-6 h-6 rounded-lg bg-green-500 flex items-center justify-center">
                                <i class="fas fa-id-card text-white text-xs"></i>
                            </span>
                            Roll No / Class
                        </label>
                        <input type="text" id="rollNo" placeholder="e.g., 12345 (BCA)" 
                            class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 text-gray-800 dark:text-white input-modern text-sm sm:text-base" 
                            oninput="generateApp()">
                    </div>
                </div>

                <!-- Authority and College -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-5">
                    <div>
                        <label class="flex items-center gap-2 mb-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">
                            <span class="w-6 h-6 rounded-lg bg-purple-500 flex items-center justify-center">
                                <i class="fas fa-user-tie text-white text-xs"></i>
                            </span>
                            To Whom
                        </label>
                        <select id="authority" class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 text-gray-800 dark:text-white input-modern cursor-pointer text-sm sm:text-base font-medium" onchange="generateApp()" aria-label="Select authority to address">
                            <option value="The Principal">üëî The Principal</option>
                            <option value="The Head of Department">üë®‚Äçüíº The HOD</option>
                            <option value="The Dean">üéì The Dean</option>
                            <option value="The Registrar">üìã The Registrar</option>
                            <option value="The Class Teacher">üë©‚Äçüè´ The Class Teacher</option>
                        </select>
                    </div>
                    <div>
                        <label class="flex items-center gap-2 mb-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">
                            <span class="w-6 h-6 rounded-lg bg-orange-500 flex items-center justify-center">
                                <i class="fas fa-university text-white text-xs"></i>
                            </span>
                            College/University
                        </label>
                        <input type="text" id="collegeName" placeholder="e.g., ABC College" 
                            class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 text-gray-800 dark:text-white input-modern text-sm sm:text-base" 
                            oninput="generateApp()">
                    </div>
                </div>

                <!-- Date Range (for leave applications) -->
                <div id="dateSection" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-5">
                    <div>
                        <label class="flex items-center gap-2 mb-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">
                            <span class="w-6 h-6 rounded-lg bg-teal-500 flex items-center justify-center">
                                <i class="fas fa-calendar-alt text-white text-xs"></i>
                            </span>
                            From Date
                        </label>
                        <input type="date" id="fromDate" 
                            class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 text-gray-800 dark:text-white input-modern cursor-pointer text-sm sm:text-base" 
                            onchange="generateApp()">
                    </div>
                    <div>
                        <label class="flex items-center gap-2 mb-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">
                            <span class="w-6 h-6 rounded-lg bg-cyan-500 flex items-center justify-center">
                                <i class="fas fa-calendar-check text-white text-xs"></i>
                            </span>
                            To Date
                        </label>
                        <input type="date" id="toDate" 
                            class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 text-gray-800 dark:text-white input-modern cursor-pointer text-sm sm:text-base" 
                            onchange="generateApp()">
                    </div>
                </div>

                <!-- Reason -->
                <div class="mb-5">
                    <label class="flex items-center gap-2 mb-3 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">
                        <span class="w-6 h-6 rounded-lg bg-pink-500 flex items-center justify-center">
                            <i class="fas fa-comment-dots text-white text-xs"></i>
                        </span>
                        Additional Details / Reason
                    </label>
                    <textarea id="reasonText" 
                        class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 text-gray-800 dark:text-white input-modern resize-none text-sm sm:text-base" 
                        rows="3"
                        placeholder="Optional: Add specific details about your request..." 
                        oninput="generateApp()"></textarea>
                </div>

                <!-- Tip Box -->
                <div class="p-4 bg-gradient-to-r from-amber-50 via-yellow-50 to-orange-50 dark:from-amber-900/30 dark:via-yellow-900/30 dark:to-orange-900/30 rounded-2xl border border-amber-200/50 dark:border-amber-700/30 flex items-start gap-4">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center flex-shrink-0 shadow-lg">
                        <i class="fas fa-lightbulb text-white"></i>
                    </div>
                    <div>
                        <p class="font-bold text-amber-800 dark:text-amber-300 text-sm mb-1">Pro Tip! ‚ú®</p>
                        <p class="text-xs text-amber-700 dark:text-amber-400 opacity-90">Your letter updates automatically as you type. Print it or share directly on WhatsApp!</p>
                    </div>
                </div>
            </div>

            <!-- Preview and Actions -->
            <div class="flex flex-col gap-5 animate-slide-up" style="animation-delay: 0.2s;">
                
                <!-- Action Buttons -->
                <div class="grid grid-cols-4 gap-2 sm:gap-3 no-print">
                    <button onclick="window.print()" class="btn-hover gradient-bg text-white py-4 px-3 rounded-2xl shadow-xl font-bold flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 transition-all group">
                        <i class="fas fa-print text-lg group-hover:scale-110 transition-transform"></i>
                        <span class="text-xs sm:text-sm">Print</span>
                    </button>
                    <button onclick="copyText()" class="btn-hover bg-slate-700 dark:bg-slate-600 text-white py-4 px-3 rounded-2xl shadow-xl font-bold flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 transition-all group">
                        <i class="fas fa-copy text-lg group-hover:scale-110 transition-transform"></i>
                        <span class="text-xs sm:text-sm">Copy</span>
                    </button>
                    <button onclick="shareWhatsApp()" class="btn-hover bg-gradient-to-br from-green-500 to-green-600 text-white py-4 px-3 rounded-2xl shadow-xl font-bold flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 transition-all group">
                        <i class="fab fa-whatsapp text-xl group-hover:scale-110 transition-transform"></i>
                        <span class="text-xs sm:text-sm">Share</span>
                    </button>
                    <button onclick="resetForm()" class="btn-hover bg-gradient-to-br from-red-500 to-rose-600 text-white py-4 px-3 rounded-2xl shadow-xl font-bold flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-2 transition-all group">
                        <i class="fas fa-rotate text-lg group-hover:rotate-180 transition-transform duration-500"></i>
                        <span class="text-xs sm:text-sm">Reset</span>
                    </button>
                </div>

                <!-- Letter Preview -->
                <div id="printable-area" class="glass-card paper-effect p-6 sm:p-10 rounded-3xl text-gray-900 dark:text-gray-100 leading-relaxed min-h-[500px] sm:min-h-[600px] card-hover">
                    <div id="letter-content" class="font-serif"></div>
                </div>

                <!-- Character Count -->
                <div class="no-print flex items-center justify-center gap-6 text-sm text-gray-500 dark:text-gray-400 bg-white/50 dark:bg-slate-800/50 backdrop-blur p-3 rounded-2xl">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-font text-primary-500"></i>
                        <span>Words: <strong id="wordCount" class="text-gray-700 dark:text-gray-300">0</strong></span>
                    </div>
                    <div class="w-px h-4 bg-gray-300 dark:bg-gray-600"></div>
                    <div class="flex items-center gap-2">
                        <i class="fas fa-text-width text-accent-500"></i>
                        <span>Characters: <strong id="charCount" class="text-gray-700 dark:text-gray-300">0</strong></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="no-print mt-8 py-8 relative">
        <div class="container mx-auto px-4 text-center">
            <div class="flex flex-col items-center gap-4">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl gradient-bg flex items-center justify-center">
                        <i class="fas fa-graduation-cap text-white"></i>
                    </div>
                    <span class="text-lg font-bold text-gray-800 dark:text-white">Shiksha Setu</span>
                </div>
                <p class="text-gray-500 dark:text-gray-400 text-sm">
                    Made with <i class="fas fa-heart text-red-500 animate-pulse mx-1"></i> for students everywhere
                </p>
                <div class="flex items-center gap-4 text-xs text-gray-400 dark:text-gray-500">
                    <span>¬© 2024 Shiksha Setu</span>
                    <span>‚Ä¢</span>
                    <span>Digital Arzi Tool</span>
                    <span>‚Ä¢</span>
                    <span>Free Forever</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Initialize date fields with today's date
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('fromDate').value = today;
            document.getElementById('toDate').value = today;
            
            // Check for saved dark mode preference
            if (localStorage.getItem('darkMode') === 'true') {
                document.documentElement.classList.add('dark');
                document.getElementById('theme-icon').className = 'fas fa-sun text-lg';
            }
            
            generateApp();
            updateDateSectionVisibility();
            
            // Add smooth reveal animation to cards
            document.querySelectorAll('.animate-slide-up').forEach((el, i) => {
                el.style.opacity = '0';
                setTimeout(() => {
                    el.style.opacity = '1';
                }, i * 100);
            });
        });

        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            localStorage.setItem('darkMode', isDark);
            const icon = document.getElementById('theme-icon');
            icon.className = isDark ? 'fas fa-sun text-lg' : 'fas fa-moon text-lg';
            icon.style.transform = 'rotate(360deg)';
            setTimeout(() => { icon.style.transform = ''; }, 300);
            showToast(isDark ? 'Dark mode enabled' : 'Light mode enabled', 'info');
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-exclamation-circle',
                info: 'fa-info-circle'
            };
            toast.querySelector('i').className = `fas ${icons[type] || icons.success} text-xl`;
            // Strip emojis for screen reader accessibility while keeping visual emojis
            const cleanMessage = message.replace(/[\u{1F300}-\u{1F9FF}]/gu, '').trim();
            toastMessage.textContent = message;
            toastMessage.setAttribute('aria-label', cleanMessage);
            toast.className = `toast toast-${type} show`;
            setTimeout(() => { toast.classList.remove('show'); }, 3000);
        }

        function updateDateSectionVisibility() {
            const type = document.getElementById('appType').value;
            const dateSection = document.getElementById('dateSection');
            const leaveTypes = ['sick', 'urgent', 'exam', 'family', 'medical'];
            const shouldShow = leaveTypes.includes(type);
            dateSection.style.display = shouldShow ? 'grid' : 'none';
            dateSection.style.opacity = shouldShow ? '1' : '0';
        }

        function formatDate(dateStr) {
            if (!dateStr) return '';
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-IN', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        function getDateRange() {
            const from = document.getElementById('fromDate').value;
            const to = document.getElementById('toDate').value;
            if (!from && !to) {
                return 'the requested date(s)';
            }
            if (!from || !to || from === to) {
                return formatDate(from || to);
            }
            return `${formatDate(from)} to ${formatDate(to)}`;
        }

        function generateApp() {
            updateDateSectionVisibility();
            
            const type = document.getElementById('appType').value;
            const authority = document.getElementById('authority').value;
            const name = document.getElementById('studentName').value || "[Your Name]";
            const roll = document.getElementById('rollNo').value || "[Roll No / Class]";
            const college = document.getElementById('collegeName').value || "Govt. College / University";
            const reason = document.getElementById('reasonText').value;
            const dateRange = getDateRange();
            const todayDate = new Date().toLocaleDateString('en-IN', { year: 'numeric', month: 'long', day: 'numeric' });

            let subject = "";
            let body = "";

            // Enhanced templates with more variety
            switch(type) {
                case 'sick':
                    subject = "Application for Sick Leave";
                    const sickReason = reason || "suffering from fever and body ache";
                    body = `Respectfully, I beg to state that I am a student of ${roll} in your esteemed institution.\n\nI am ${sickReason}, and due to my health condition, I am unable to attend classes on ${dateRange}.\n\nI humbly request you to kindly grant me leave for the mentioned period. I shall be highly obliged.`;
                    break;
                    
                case 'urgent':
                    subject = "Leave Application for Urgent Work";
                    const urgentReason = reason || "some urgent family work";
                    body = `Respectfully, I wish to bring to your kind attention that I am a student of ${roll}.\n\nI have ${urgentReason} that requires my immediate presence. Therefore, I am unable to attend college on ${dateRange}.\n\nKindly grant me leave for the mentioned period. I shall complete all the pending work upon my return.`;
                    break;
                    
                case 'exam':
                    subject = "Leave Application for Examination";
                    const examReason = reason || "a competitive examination";
                    body = `Respectfully, I am writing to inform you that I am a student of ${roll}.\n\nI have ${examReason} scheduled on ${dateRange}. This examination is very important for my career advancement.\n\nI kindly request you to grant me leave for the examination dates. I shall ensure to complete any missed assignments or classwork.`;
                    break;
                    
                case 'family':
                    subject = "Leave Application for Family Function";
                    const familyReason = reason || "an important family function";
                    body = `Respectfully, I wish to inform you that I am a student of ${roll}.\n\nThere is ${familyReason} at my native place that requires my presence from ${dateRange}. My presence is essential as it is a significant family event.\n\nI humbly request you to kindly grant me leave for the mentioned dates.`;
                    break;
                    
                case 'medical':
                    subject = "Leave Application for Medical Appointment";
                    const medicalReason = reason || "a scheduled medical check-up";
                    body = `Respectfully, I am a student of ${roll} in your institution.\n\nI have ${medicalReason} on ${dateRange}. The doctor's appointment has been scheduled in advance and cannot be rescheduled.\n\nI kindly request you to grant me leave for the appointment. I will submit the medical certificate upon returning.`;
                    break;
                    
                case 'buspass':
                    subject = "Request for Bus Pass Attestation";
                    const busReason = reason || "my daily commute to college";
                    body = `Respectfully, I am a regular student of ${roll} in your esteemed institution.\n\nI require a bus pass for ${busReason}. I travel from my residence to college daily and a bus pass would be economically beneficial for me.\n\nPlease attest my bus pass application form so that I can submit it to the transport department.`;
                    break;
                    
                case 'dmc':
                    subject = "Request Regarding DMC Correction";
                    const dmcReason = reason || "incorrect spelling of my name";
                    body = `Respectfully, I wish to bring to your kind notice that I am a student of ${roll}.\n\nThere is an error in my Detailed Marks Certificate (DMC). The issue is: ${dmcReason}.\n\nI request you to kindly look into this matter and help me get the necessary corrections done at the earliest. I have attached the required documents for verification.`;
                    break;
                    
                case 'fee':
                    subject = "Request for Fee Concession";
                    const feeReason = reason || "My family's financial condition is not good, and we are unable to bear the full expense of education";
                    body = `Respectfully, I am a student of ${roll} in your institution.\n\n${feeReason}. Despite our financial constraints, I have maintained a good academic record and am dedicated to my studies.\n\nI humbly request you to kindly grant me a fee concession so that I may continue my education without financial burden. I shall be highly grateful for this kind consideration.`;
                    break;
                    
                case 'transfer':
                    subject = "Application for Transfer Certificate";
                    const tcReason = reason || "I am shifting to another city due to my father's job transfer";
                    body = `Respectfully, I am a student of ${roll} in your esteemed institution.\n\n${tcReason}. Due to this reason, I will not be able to continue my studies here and need to seek admission in another institution.\n\nI kindly request you to issue my Transfer Certificate at the earliest so that I can complete the admission formalities at my new institution.`;
                    break;
                    
                case 'character':
                    subject = "Application for Character Certificate";
                    const charReason = reason || "applying for a government job/higher studies";
                    body = `Respectfully, I am a student of ${roll} in your institution.\n\nI require a Character Certificate for ${charReason}. During my time at this institution, I have maintained good conduct and have not been involved in any disciplinary issues.\n\nI kindly request you to issue my Character Certificate at the earliest. I shall be highly obliged.`;
                    break;
                    
                case 'library':
                    subject = "Application for Library Card";
                    const libReason = reason || "I need access to the library resources for my academic work and research";
                    body = `Respectfully, I am a newly admitted student of ${roll} in your institution.\n\n${libReason}. The library facilities would greatly help me in my studies and academic projects.\n\nI kindly request you to issue a library card in my name so that I can utilize the library resources effectively.`;
                    break;
                    
                default:
                    subject = "General Application";
                    body = `Respectfully, I am a student of ${roll} in your institution.\n\n${reason || "I am writing regarding an important matter."}\n\nKindly consider my request favorably.`;
            }

            // Assemble the Letter with improved formatting
            const finalHTML = `
                <div class="mb-8 pt-4">
                    <p class="font-bold text-gray-800 dark:text-gray-200 text-lg">To,</p>
                    <p class="font-bold text-gray-800 dark:text-gray-200 text-lg">${authority},</p>
                    <p class="text-gray-600 dark:text-gray-400">${college}</p>
                </div>

                <div class="mb-6 pb-4 border-b-2 border-dashed border-gray-200 dark:border-gray-600">
                    <span class="font-bold text-gray-700 dark:text-gray-300">Subject:</span> 
                    <span class="ml-2 text-gray-800 dark:text-gray-200 underline decoration-2 decoration-primary-500 underline-offset-4">${subject}</span>
                </div>

                <div class="mb-6">
                    <p class="text-gray-800 dark:text-gray-200 text-lg">Respected Sir/Madam,</p>
                </div>

                <div class="mb-8 text-justify whitespace-pre-wrap leading-8 text-gray-700 dark:text-gray-300">
                    ${body}
                </div>

                <div class="mt-10 pt-6 border-t border-gray-100 dark:border-gray-700">
                    <p class="text-gray-600 dark:text-gray-400 italic">Thanking you in anticipation,</p>
                </div>

                <div class="mt-8">
                    <p class="text-gray-600 dark:text-gray-400">Yours obediently,</p>
                    <p class="font-bold text-xl mt-3 text-gray-800 dark:text-gray-200 bg-gradient-to-r from-primary-500 to-accent-500 bg-clip-text text-transparent">${name}</p>
                    <p class="text-gray-600 dark:text-gray-400 mt-1">${roll}</p>
                    <div class="mt-4 inline-flex items-center gap-2 bg-gray-50 dark:bg-gray-800 px-4 py-2 rounded-lg">
                        <i class="fas fa-calendar-day text-primary-500 text-sm"></i>
                        <span class="text-sm text-gray-500 dark:text-gray-400">Date: ${todayDate}</span>
                    </div>
                </div>
            `;

            document.getElementById('letter-content').innerHTML = finalHTML;
            updateWordCount();
        }

        function updateWordCount() {
            const text = document.getElementById('letter-content').innerText;
            const trimmedText = text.trim();
            const words = trimmedText.length === 0 ? 0 : trimmedText.split(/\s+/).filter(word => word.length > 0).length;
            const chars = text.length;
            document.getElementById('wordCount').textContent = words;
            document.getElementById('charCount').textContent = chars;
        }

        function copyText() {
            const text = document.getElementById('letter-content').innerText;
            navigator.clipboard.writeText(text).then(() => {
                showToast('üìã Copied to clipboard!', 'success');
            }).catch(() => {
                showToast('Failed to copy text', 'error');
            });
        }

        function shareWhatsApp() {
            const text = document.getElementById('letter-content').innerText;
            // Truncate to first 1000 characters to avoid URL length issues
            const truncatedText = text.length > 1000 ? text.substring(0, 1000) + '...' : text;
            const encodedText = encodeURIComponent(truncatedText);
            window.open(`https://wa.me/?text=${encodedText}`, '_blank');
            showToast('üì± Opening WhatsApp...', 'success');
        }

        function resetForm() {
            // Add visual feedback
            const form = document.querySelector('.glass-card');
            form.style.transform = 'scale(0.98)';
            setTimeout(() => { form.style.transform = ''; }, 150);
            
            document.getElementById('studentName').value = '';
            document.getElementById('rollNo').value = '';
            document.getElementById('collegeName').value = '';
            document.getElementById('reasonText').value = '';
            document.getElementById('appType').selectedIndex = 0;
            document.getElementById('authority').selectedIndex = 0;
            
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('fromDate').value = today;
            document.getElementById('toDate').value = today;
            
            generateApp();
            showToast('üîÑ Form reset successfully!', 'success');
        }

        // Add keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key.toLowerCase()) {
                    case 'p':
                        e.preventDefault();
                        window.print();
                        break;
                    case 'c':
                        if (e.shiftKey) {
                            e.preventDefault();
                            copyText();
                        }
                        break;
                }
            }
        });

        // Note: generateApp() is called inside DOMContentLoaded event listener above
    </script>
</body>
</html>
